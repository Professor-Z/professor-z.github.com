<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>python写爬虫问题总结 - vuuihc</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><div class="post-header"><img class="background" src="/default_images/post_background.jpg"><div class="post-title"><h1 class="title">python写爬虫问题总结</h1><ul class="meta"><li><i class="icon icon-author"></i>vuuihc</li><li><i class="icon icon-clock"></i>2 Minutes</li><li><i class="icon icon-calendar"></i>January 27, 2015</li></ul></div></div><div class="article-content"><h3 id="Python文件与idle关联"><a href="#Python文件与idle关联" class="headerlink" title="Python文件与idle关联"></a>Python文件与idle关联</h3><p>我在windows环境下开发Python时，一般用sublime text 2 写Python代码，用安装Python时自带的IDLE来调试。有时候安装程序并没有帮你绑定IDLE和<code>.py</code>文件。这时候，需要我们自己去绑定。<br>步骤：</p>
<ol>
<li>右击<code>.py</code>文件，选择打开方式</li>
<li>选择<code>在这台电脑上选择应用程序</code>（我的是win8.1）</li>
<li>选择你Python安装路径下的一个文件夹里面的<code>idle.bat</code>文件来打开。比如我的是在<code>C:\Python33\Lib\idlelib\idle.bat</code><br>之后你就可以直接双击<code>.py</code>文件用IDLE打开，然后用F5，去运行并调试你写的程序了<a id="more"></a>
<h3 id="IDLE提示缩进错误"><a href="#IDLE提示缩进错误" class="headerlink" title="IDLE提示缩进错误"></a>IDLE提示缩进错误</h3>出现这个错误的原因可能是，Python自带的IDLE的tab的缩进和你的编辑器（比如sublime text 2）的tab 默认缩进大小不同，而且IDLE本身它对space和tab是区分的。所以经常会出现虽然你视觉上感觉不到缩进有错误，但是执行程序的时候，IDLE会报错。<br>解决方法是这样的，在IELD中，选择菜单栏的Edit-&gt;Select ALL，然后选择菜单栏的Format-&gt;Untabify Region。就可以了。<br>这个做法的作用是，把所有的tab替换成了space。</li>
</ol>
<h3 id="在idle里面打印网页中文是乱码"><a href="#在idle里面打印网页中文是乱码" class="headerlink" title="在idle里面打印网页中文是乱码"></a>在idle里面打印网页中文是乱码</h3><p>windows系统下，用Python抓取网页时，在通过read()函数读取了网页之后，如果通过print打印出网页不经过编码转换，可能会出现网页中的中文字符以乱码的形式出现如下图所示。<br>这时的解决方法是，用gbk解码得到的网页。<br>把<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(html)</div></pre></td></tr></table></figure></p>
<p>改成<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(html.decode(<span class="string">"gbk"</span>))</div></pre></td></tr></table></figure></p>
<p>这个步骤的作用，是将以其它编码形式（一般是GBK）编码的中文解码成Unicode编码。</p>
<p>###爬虫进程超时阻塞<br>在程序的运行过程中，有时候会出现每隔一段时间（大约1小时），抓取就自动停止的bug，后来解决这个问题采用了引入socket模块并设置一个timeout值的方法来解决的，其中timeout值可以自定义，只要能解决自动停止这个bug即可。我在这个程序中设置了之后，程序假死的情况基本解决了。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">socket.setdefaulttimeout(<span class="number">50</span>)</div></pre></td></tr></table></figure></p>
<p>###单线程太慢</p>
<p>###sublime text 2编译任何语言控制台无输出</p>
<p>##更新日志<br>2015-7-1 更新“爬虫进程超时阻塞”</p>
</div><div class="article-meta"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">3</span></li></ul></div></div><div class="article-comment"><div class="ds-thread" id="ds-thread" data-thread-key="cizvb5u0i001ywk6nthlmbhqq" data-title="python写爬虫问题总结" data-url="http://vuuihc.com/2015/01/27/python写爬虫问题总结/" site-name="vuuihc"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2015/06/17/考研总结/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2014/07/21/个人技术博客集萃/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="http://github.com/Professor-Z" title="GitHub" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com/vuuihc" title="Weibo" target="_blank"><i class="icon icon-weibo"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2017 vuuihc<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></body></html>